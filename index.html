<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- For old IEs -->
    <link rel="shortcut icon" href="./favicon/favicon.ico" />

    <!-- For new browsers - multisize ico  -->
    <link rel="icon" type="image/x-icon" sizes="16x16 32x32" href="./favicon/favicon.ico">

    <!-- For iPad with high-resolution Retina display running iOS ≥ 7: -->
    <link rel="apple-touch-icon" sizes="152x152" href="./favicon/favicon-152-precomposed.png">

    <!-- For iPad with high-resolution Retina display running iOS ≤ 6: -->
    <link rel="apple-touch-icon" sizes="144x144" href="./favicon/favicon-144-precomposed.png">

    <!-- For iPhone with high-resolution Retina display running iOS ≥ 7: -->
    <link rel="apple-touch-icon" sizes="120x120" href="./favicon/favicon-120-precomposed.png">

    <!-- For iPhone with high-resolution Retina display running iOS ≤ 6: -->
    <link rel="apple-touch-icon" sizes="114x114" href="./favicon/favicon-114-precomposed.png">

    <!-- For iPhone 6+ -->
    <link rel="apple-touch-icon" sizes="180x180" href="./favicon/favicon-180-precomposed.png">

    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon" sizes="72x72" href="./favicon/favicon-72-precomposed.png">

    <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
    <link rel="apple-touch-icon" sizes="57x57" href="./favicon/favicon-57.png">

    <!-- For Old Chrome -->
    <link rel="icon" sizes="32x32" href="./favicon/favicon-32.png">

    <!-- For IE10 Metro -->
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <meta name="msapplication-TileImage" content="./favicon/favicon-144-precomposed.png">
    <meta name="theme-color" content="#ffffff">

    <!-- Chrome for Android -->
    <link rel="manifest" href="./favicon/manifest.json">
    <link rel="icon" sizes="192x192" href="./favicon/favicon-192.png">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="./css/vc-toggle-switch.css" rel="stylesheet" />
    <title>labable v.2</title>
</head>

<body>
    <!-- As a heading -->
    <nav class="navbar sticky-top navbar-dark bg-success">
        <div class="container-sm">
            <span class="navbar-brand mb-0 h1">
                <img src="./favicon/favicon-144-precomposed.png" alt="" width="24" height="24"
                    class="d-inline-block align-text-top">
                labable <small>2.0 </small>
            </span>
            <span class="text-light small" style="font-size:0.5em" id="last_modified">
            </span>

        </div>
    </nav>
    <div class="container-sm">

        <div id="area_onsite_users" class="alert alert-success mt-4 position-relative" role="alert" hidden>

            <div class="position-absolute top-0 start-50 translate-middle badge rounded-pill bg-success">
                NOW ONSITE
            </div>


            <!-- <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-geo-fill"
                viewBox="0 0 16 16">
                <path fill-rule="evenodd"
                    d="M4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999zm2.493 8.574a.5.5 0 0 1-.411.575c-.712.118-1.28.295-1.655.493a1.319 1.319 0 0 0-.37.265.301.301 0 0 0-.057.09V14l.002.008a.147.147 0 0 0 .016.033.617.617 0 0 0 .145.15c.165.13.435.27.813.395.751.25 1.82.414 3.024.414s2.273-.163 3.024-.414c.378-.126.648-.265.813-.395a.619.619 0 0 0 .146-.15.148.148 0 0 0 .015-.033L12 14v-.004a.301.301 0 0 0-.057-.09 1.318 1.318 0 0 0-.37-.264c-.376-.198-.943-.375-1.655-.493a.5.5 0 1 1 .164-.986c.77.127 1.452.328 1.957.594C12.5 13 13 13.4 13 14c0 .426-.26.752-.544.977-.29.228-.68.413-1.116.558-.878.293-2.059.465-3.34.465-1.281 0-2.462-.172-3.34-.465-.436-.145-.826-.33-1.116-.558C3.26 14.752 3 14.426 3 14c0-.599.5-1 .961-1.243.505-.266 1.187-.467 1.957-.594a.5.5 0 0 1 .575.411z" />
            </svg> -->
        </div>

        <nav>
            <div class="nav mt-4 nav-tabs" id="nav-tab" role="tablist">
                <button class="nav-link active" id="nav-in-tab" data-bs-toggle="tab" data-bs-target="#nav-in"
                    type="button" role="tab" aria-controls="nav-in" aria-selected="true">Check in/out</button>
                <button class="nav-link" id="nav-out-tab" data-bs-toggle="tab" data-bs-target="#nav-out" type="button"
                    role="tab" aria-controls="nav-out" aria-selected="false">Settings</button>
                <button class="nav-link" id="nav-others-tab" data-bs-toggle="tab" data-bs-target="#nav-others"
                    type="button" role="tab" aria-controls="nav-others" aria-selected="false">その他</button>
            </div>
        </nav>
        <div class="tab-content" id="nav-tabContent">
            <div class="tab-pane fade show active" id="nav-in" role="tabpanel" aria-labelledby="nav-in-tab">
                <div class="row mt-1 g-3 align-items-center">
                    <div class="col-5">
                        <label for="inputPassword6" class="col-form-label">名前<span
                                class="small text-muted">（必須）</span></label>
                    </div>
                    <div class="col-7">
                        <input type="text" id="name" class="form-control" aria-describedby="passwordHelpInline"
                            oninput="saveText(this);" required>
                    </div>
                </div>
                <!-- <div class="row g-3 mt-1 align-items-center">
                    <div class="col-5">
                        <label for="inputPassword6" class="col-form-label">体温<span
                                class="small text-muted">（必須）</span></label>
                    </div>
                    <div class="col-7">
                        <input type="number" min="35.5" max="37.4" step="0.1" id="temp" onchange="saveText(this);"
                            class="form-control" aria-describedby="passwordHelpInline">
                        <input type="range" class="form-range" value="36.8" min="35.5" max="37.4" step="0.1"
                            id="range_temp">
                    </div>
                </div> -->
                <!-- <div class="row g-3 mt-1 align-items-center">
                    <div class="col-5">
                        <label for="inputPassword6" class="col-form-label">移動方法</label>
                    </div>
                    <div class="col-7">

                        <select class="form-select" aria-label="Default select example" id="select_how_to_move"
                            onchange="saveText(this)">
                            <option value="0" selected>徒歩、自転車、バイク、車</option>
                            <option value="1">電車バス1時間以内</option>
                            <option value="2">電車バス2時間以内</option>
                            <option value="3">電車バス2時間以上</option>
                        </select>
                    </div>
                </div> -->

                <div class="row g-3 mt-1 align-items-center">
                    <div class="col-5">
                        <label for="inputPassword6" class="col-form-label">Message<span
                                class="small text-muted"></span></label>
                    </div>
                    <div class="col-7">
                        <input type="text" id="message" oninput="saveText(this);" class="form-control"
                            aria-describedby="passwordHelpInline">
                    </div>
                </div>

                <div class="row g-3 mt-1 align-items-center">
                    <div class="col-5">
                        <label for="inputPassword6" class="col-form-label">私は注意事項を理解しました</label>
                    </div>
                    <div class="col-1">
                        <input class="form-check-input" type="checkbox" value="" id="agree_checkbox" checked>
                    </div>

                    <div class="col-6" style="text-align:right;">
                        <!-- Button trigger modal -->
                        <button type="button" class="btn btn-outline-secondary" data-bs-toggle="modal"
                            data-bs-target="#exampleModal">
                            注意事項を読む
                        </button>


                    </div>

                    <!-- Modal -->
                    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">注意事項</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <ul class="list-styled mb-0">
                                        <li>人同士の間隔を2m（最低1m）以上とり、三密を避ける</li>
                                        <li>入室前に手洗い及び手の触れる箇所を適時消毒する</li>
                                        <li>微熱や自覚症状等の健康不良が認められる場合は入構はできない</li>
                                        <li>室内での飲食は禁止</li>
                                        <li>消毒液、マスクなどを利用して感染予防に努める</li>
                                        <li>新型コロナウィルスにおける社会状況を鑑み、十分注意した上で学内に入構する</li>
                                    </ul>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>



                <div class="position-fixed top-50 start-50 translate-middle p-3" style="z-index: 11">
                    <div id="toast" class="toast hide text-black bg-light" role="alert" aria-live="assertive"
                        aria-atomic="true">
                        <div class="toast-header bg-light">
                            <!-- <img src="..." class="rounded me-2" alt="..."> -->
                            <strong class="me-auto">labable</strong>
                            <!-- <small>labable</small> -->
                            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                        </div>
                        <div class="toast-body" id="toast_message">

                        </div>
                    </div>
                </div>





                <!-- <div class="text-right mt-4" style="text-align:right;">
                    <button class="btn btn-primary" type="submit" onclick="checkin(this)">checkin</button>
                    <button class="btn btn-danger" type="submit" onclick="checkout(this);">checkout</button>
                </div> -->

                <!--
                    Reference: https://www.cssscript.com/ios-vc-toggle-switch/
                -->
                <div class="text-right mt-4" style="text-align:right;">
                    I'm
                    <div style="--vc-off-color: #dc3545" class="text-center d-inline-block">
                        <div class="vc-toggle-container">
                            <label class="vc-switch">
                                <input type="checkbox" id="checkinout_checkbox" class="vc-switch-input"
                                    onclick="checkinout(this)" />
                                <span data-on="IN" data-off="OUT" class="vc-switch-label"></span>
                                <span class="vc-handle"></span>
                            </label>
                            now.
                        </div>

                    </div>
                </div>

            </div>

            <div class="tab-pane fade" id="nav-out" role="tabpanel" aria-labelledby="nav-out-tab">
                <div class="row mt-1 g-3 align-items-center">
                    <div class="col-8">
                        <label for="inputPassword6" class="col-form-label">
                            アイコン<br>
                            <span class="small text-muted">
                                投稿するslackで利用可能なicon名を指定できます。デフォルトは初心者マーク
                                <img src="./images/beginner.png" height="24px">です。</span>
                        </label>
                    </div>
                    <div class="col-4">
                        <input required type="text" id="icon" class="form-control" placeholder=":beginner:"
                            value=":beginner:" aria-describedby="passwordHelpInline" oninput="saveText(this);">
                    </div>
                </div>

                <div class="row mt-1 g-3 align-items-center">
                    <div class="col-8">
                        <label for="inputPassword6" class="col-form-label">
                            投稿チャンネル名<br>
                            <span class="small text-muted">
                                投稿チャンネル名を変更する場合は「その他」タブから新規アクセスリンクを作成する際に投稿したいチャンネル名を指定してください。
                            </span>
                        </label>
                    </div>
                    <div class="col-4">
                        <input readonly type="text" id="channel" class="form-control" label="channel"
                            placeholder="checkinout" value="checkinout" aria-describedby="passwordHelpInline"
                            oninput="saveText(this);">
                    </div>
                </div>

                <div class="row mt-1 g-3 align-items-center">
                    <div class="col-8">
                        <label for="inputPassword6" class="col-form-label">
                            自動退出処理<br>
                            <span class="small text-muted">
                                有効にしている場合、日付を跨いだユーザは自動的に退出処理されます。ただしslackには通知されません。現在この機能のON/OFFは選択できません。
                            </span>
                        </label>
                    </div>
                    <div class="col-4">
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" role="switch" id="auto_checkout" checked
                                disabled>
                            <label class="form-check-label" for="auto_checkout">自動退出</label>
                        </div>
                    </div>
                </div>

            </div>

            <div class="tab-pane fade" id="nav-others" role="tabpanel" aria-labelledby="nav-others-tab">
                <div class="row mt-1 g-3 align-items-center">
                    <p class="h5 mb-0">新しいアクセスリンクを作成する</p>
                    <p class="small">
                        別のslackワークスペースを利用してこのシステムを利用する場合は以下のリンクからアクセスリンクを作成し、そのアクセスリンクを参加者に共有してください。アクセスリンクの作成にはslackのincoming
                        webhookの作成が必要になるため、管理者権限が必要になります。リンクの作成にはslackワークスペースの管理者に依頼してください。
                        <a
                            href="https://tetsuakibaba.jp/project/labable/getStart.html">https://tetsuakibaba.jp/project/labable/getStart.html</a>
                    </p>
                    <p class="h5 mb-0">本ウェブアプリ（labable）について</p>
                    <p class="small">
                        本ウェブアプリケーションは東京都立大学における学生入構申請をなるべく手軽に継続して行うために馬場哲晃が開発しました。研究室やプロジェクト運営でslackを利用しており、且つ体調申告を実施している場合は本ウェブアプリが役に立つかもしれません。機能改善や追加は
                        <a href="https://github.com/TetsuakiBaba/labable"
                            target="_blank">labableのリポジトリページ</a>からissueを送ってください。
                    </p>
                </div>

            </div>

            <hr>
            <footer class="text-muted small text-center">
                &copy; 2023 <a href="https://tetsuakibaba.jp" class="link-secondary" target="_blank">Tetsuaki BABA</a>
                <a href="https://github.com/TetsuakiBaba/labable" class="link-secondary" target="_blank">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-github" viewBox="0 0 16 16">
                        <path
                            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" />
                    </svg>
                </a>
            </footer>
        </div>


        <!-- Button trigger modal -->
        <!-- <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modal_user_detail">
            Launch demo modal
        </button> -->

        <!-- Modal -->
        <div class="modal fade" id="modal_user_detail" tabindex="-1" aria-labelledby="user_detail" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p class="text-center text-secondary">
                            <svg xmlns="http://www.w3.org/2000/svg" width="4em" height="4em" fill="currentColor"
                                class="bi bi-person-circle" viewBox="0 0 16 16">
                                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
                                <path fill-rule="evenodd"
                                    d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z" />
                            </svg>
                            <br>
                            <span id="modal_name"></span>
                        </p>
                        <div class="alert alert-success " role="alert">
                            <div class="row align-items-center">
                                <div class="col-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" fill="currentColor"
                                        class="bi bi-chat-right-text-fill text-light me-2" viewBox="0 0 16 16">
                                        <path
                                            d="M16 2a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h9.586a1 1 0 0 1 .707.293l2.853 2.853a.5.5 0 0 0 .854-.353V2zM3.5 3h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1 0-1zm0 2.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1 0-1zm0 2.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1z" />
                                    </svg>
                                </div>
                                <div class="col-10">
                                    <div id="modal_message">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="text-end small text-muted" style="font-size:0.7em">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-box-arrow-in-right" viewBox="0 0 16 16">
                                <path fill-rule="evenodd"
                                    d="M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0v-2z" />
                                <path fill-rule="evenodd"
                                    d="M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z" />
                            </svg>
                            <span id="modal_timestamp"></span>
                        </p>

                        </ul>

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>


        <!-- Optional JavaScript; choose one of the two! -->
        <script src="./index.js?value=update3"></script>
        <!-- Option 1: Bootstrap Bundle with Popper -->
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
            integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
            crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"
            integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD"
            crossorigin="anonymous"></script>


        <script src="https://cdnjs.cloudflare.com/ajax/libs/svg.js/3.1.2/svg.min.js"
            integrity="sha512-I+rKw3hArzZIHzrkdELbKqrXfkSvw/h0lW/GgB8FThaBVz2e5ZUlSW8kY8v3q6wq37eybIwyufkEZxe4qSlGcg=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdn.jsdelivr.net/gh/TetsuakiBaba/svgclock.js@main/svgclock.js" crossorigin="anonymous"
            type="text/javascript"></script>


        <script>
            // setTimeout(function () {
            //     const modal = new bootstrap.Modal(document.getElementById('modal_user_detail'));
            //     modal.show();
            // }, 400)

        </script>

</body>

</html>